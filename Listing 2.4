--Suchen und Ersetzen (SEARCH_MY_STRING)
--Erstellung String Search & Replace Function
create function SERACH_MY_STRING (IN IP_STR varchar(200) ) 
        returns OP_str varchar(200)
language sqlscript   
as   
begin   
declare temp_str varchar(200) := ip_str ;   

    --Ersetze jeden Wert von 10 durch IT
    temp_str := replace (:temp_str, '10', ',IT,');

    --Ersetze jeden Wert von 20 durch US
    temp_str := replace (:temp_str, '20', ',US,');

    --Ersetze jeden Wert von 33 durch DE
    temp_str := replace (:temp_str, '33', ',DE,');
    
        --Entferne doppelte Kommas
    temp_str := replace (:temp_str, ',,', ',');

    --Entferne nachfolgende Kommas
    if (right (:temp_str, 1) = ',' ) then
        temp_str =  left (:temp_str, length(:temp_str) -1 );
    end if;
        --Entferne f√ºhrende Kommas
    if (left (:temp_str, 1) = ',' ) then
        temp_str =  right (:temp_str , length(:temp_str ) -1 );
    end if;

    op_str :=  :temp_str;
end;

